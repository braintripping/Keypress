/*
  Keypress version 2.1.4 (c) 2016 David Mauro.
  Licensed under the Apache License, Version 2.0
  http://www.apache.org/licenses/LICENSE-2.0
*/
(function(){var u,y,z,s,v,A,E,B,F,G,r,p,l,t,w,H,n,C,D={}.hasOwnProperty,i=[].indexOf||function(a){for(var c=0,b=this.length;c<b;c++)if(c in this&&this[c]===a)return c;return-1};s={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1,normalize_caps_lock:!1};w="meta alt option ctrl shift cmd".split(" ");l="ctrl";C=function(a){var c,b,d,e,f,g;"string"===typeof a&&(a=a.split(" "));if(Array.isArray(a)){g=[];b=e=0;for(f=a.length;0<=f?e<f:e>f;b=0<=f?++e:--e)d=
a[b],(c=G[d])&&(d=a[b]=c),"meta"===d&&a.splice(b,1,l),"cmd"===d?g.push(p('Warning: use the "meta" key rather than "cmd" for Windows compatibility')):g.push(void 0);return g}};n={debug:!1};var x=function(a){var c,b;for(c in a)D.call(a,c)&&(b=a[c],!1!==b&&(this[c]=b));this.keys=this.keys||[];this.count=this.count||0};x.prototype.allows_key_repeat=function(){return!this.prevent_repeat&&"function"===typeof this.on_keydown};x.prototype.reset=function(){this.count=0;return this.keyup_fired=null};var h=
function(a,c){var b,d;"undefined"!==typeof jQuery&&null!==jQuery&&a instanceof jQuery&&(1!==a.length&&p("Warning: your jQuery selector should have exactly one object."),a=a[0]);this.should_force_event_defaults=this.should_suppress_event_defaults=!1;this.sequence_delay=800;this._registered_combos=[];this._keys_down=[];this._active_combos=[];this._sequence=[];this._sequence_timer=null;this._prevent_capture=!1;this._defaults=c||{};for(b in s)D.call(s,b)&&(d=s[b],this._defaults[b]=this._defaults[b]||
d);this.element=a||document.body;b=function(a,b,c){goog.events.listen(a,b,function(a){return c(a.getBrowserEvent())},true);return c};var e=this;this.keydown_event=b(this.element,"keydown",function(a){var b,c,d,a=a||window.event;d=l==="cmd"&&i.call(e._keys_down,"cmd")>=0&&(b=z((c=a.keyCode)!=null?c:a.key))!=="cmd"&&b!=="shift"&&b!=="alt"&&b!=="caps"&&b!=="tab";e._receive_input(a,true);if(d)return e._receive_input(a,false)});var f=this;this.keyup_event=b(this.element,"keyup",function(a){a=a||window.event;
return f._receive_input(a,false)});var g=this;this.blur_event=b(window,"blur",function(){var a,b,c,d;d=g._keys_down;b=0;for(c=d.length;b<c;b++){a=d[b];g._key_up(a,{})}return g._keys_down=[]})};h.prototype.destroy=function(){var a;a=function(a,b,d){return goog.events.unlisten(a,b,function(a){return d(a.getBrowserEvent())},!0)};a(this.element,"keydown",this.keydown_event);a(this.element,"keyup",this.keyup_event);return a(window,"blur",this.blur_event)};h.prototype._cmd_bug_check=function(a){return"cmd"===
l&&0<=i.call(this._keys_down,"cmd")&&0>i.call(a,"cmd")&&1<a.length?!1:!0};h.prototype._prevent_default=function(a,c){if((c||this.should_suppress_event_defaults)&&!this.should_force_event_defaults)if(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation)return a.stopPropagation()};h.prototype._get_active_combos=function(a){var c,b;c=[];b=v(this._keys_down,function(b){return b!==a&&0<=i.call(w,b)});b.push(a);this._match_combo_arrays(b,function(a){return function(b){if(a._cmd_bug_check(b.keys))return c.push(b)}}(this));
return c};h.prototype._get_potential_combos=function(a){var c,b,d,e,f;e=[];f=this._registered_combos;b=0;for(d=f.length;b<d;b++)c=f[b],c.is_sequence||0<=i.call(c.keys,a)&&this._cmd_bug_check(c.keys)&&e.push(c);return e};h.prototype._add_to_active_combos=function(a){var c,b,d,e,f,g,o,h,m,j,k;k=!1;j=!0;d=!1;if(0<=i.call(this._active_combos,a))return!0;if(this._active_combos.length){e=f=0;for(h=this._active_combos.length;0<=h?f<h:f>h;e=0<=h?++f:--f)if((c=this._active_combos[e])&&c.is_exclusive&&a.is_exclusive){c=
c.keys;if(!k){o=0;for(g=c.length;o<g;o++)if(b=c[o],k=!0,0>i.call(a.keys,b)){k=!1;break}}if(j&&!k){m=a.keys;o=0;for(g=m.length;o<g;o++)if(b=m[o],j=!1,0>i.call(c,b)){j=!0;break}}k&&(d?(c=this._active_combos.splice(e,1)[0],null!=c&&c.reset()):(c=this._active_combos.splice(e,1,a)[0],null!=c&&c.reset(),d=!0),j=!1)}}j&&this._active_combos.unshift(a);return k||j};h.prototype._remove_from_active_combos=function(a){var c,b,d,e;b=d=0;for(e=this._active_combos.length;0<=e?d<e:d>e;b=0<=e?++d:--d)if(c=this._active_combos[b],
c===a){a=this._active_combos.splice(b,1)[0];a.reset();break}};h.prototype._get_possible_sequences=function(){var a,c,b,d,e,f,g,h,q,m,j,k;g=[];q=this._registered_combos;b=0;for(d=q.length;b<d;b++){a=q[b];c=e=1;for(m=this._sequence.length;1<=m?e<=m:e>=m;c=1<=m?++e:--e)if(k=this._sequence.slice(-c),a.is_sequence){if(0>i.call(a.keys,"shift")&&(k=v(k,function(a){return"shift"!==a}),!k.length))continue;c=h=0;for(j=k.length;0<=j?h<j:h>j;c=0<=j?++h:--h)if(a.keys[c]===k[c])f=!0;else{f=!1;break}f&&g.push(a)}}return g};
h.prototype._add_key_to_sequence=function(a,c){var b,d,e,f;this._sequence.push(a);f=this._get_possible_sequences();if(f.length){d=0;for(e=f.length;d<e;d++)b=f[d],this._prevent_default(c,b.prevent_default);this._sequence_timer&&clearTimeout(this._sequence_timer);if(-1<this.sequence_delay){var g=this;this._sequence_timer=setTimeout(function(){return g._sequence=[]},this.sequence_delay)}}else this._sequence=[]};h.prototype._get_sequence=function(a){var c,b,d,e,f,g,h,q,m,j,k,l;q=this._registered_combos;
d=0;for(e=q.length;d<e;d++)if(c=q[d],c.is_sequence){b=f=1;for(m=this._sequence.length;1<=m?f<=m:f>=m;b=1<=m?++f:--f)if(l=v(this._sequence,function(a){return 0<=i.call(c.keys,"shift")?!0:"shift"!==a}).slice(-b),c.keys.length===l.length){b=h=0;for(j=l.length;0<=j?h<j:h>j;b=0<=j?++h:--h)if(k=l[b],!(0>i.call(c.keys,"shift")&&"shift"===k)&&!("shift"===a&&0>i.call(c.keys,"shift")))if(c.keys[b]===k)g=!0;else{g=!1;break}}if(g)return c.is_exclusive&&(this._sequence=[]),c}return!1};h.prototype._receive_input=
function(a,c){var b,d;if(this._prevent_capture)this._keys_down.length&&(this._keys_down=[]);else if(b=z(null!=(d=a.keyCode)?d:a.key),(c||this._keys_down.length||!("alt"===b||b===l))&&b)return c?this._key_down(b,a):this._key_up(b,a)};h.prototype._fire=function(a,c,b,d){"function"===typeof c["on_"+a]&&this._prevent_default(b,!0!==c["on_"+a].call(c["this"],b,c.count,d));"release"===a&&(c.count=0);if("keyup"===a)return c.keyup_fired=!0};h.prototype._match_combo_arrays=function(a,c){var b,d,e,f,g;f=this._registered_combos;
d=0;for(e=f.length;d<e;d++)g=f[d],b=a.slice(0),g.normalize_caps_lock&&0<=i.call(b,"caps")&&b.splice(b.indexOf("caps"),1),(!g.is_unordered&&y(b,g.keys)||g.is_unordered&&u(b,g.keys))&&c(g)};h.prototype._fuzzy_match_combo_arrays=function(a,c){var b,d,e,f;e=this._registered_combos;b=0;for(d=e.length;b<d;b++)f=e[b],(!f.is_unordered&&B(f.keys,a)||f.is_unordered&&E(f.keys,a))&&c(f)};h.prototype._keys_remain=function(a){var c,b,d,e;e=a.keys;b=0;for(d=e.length;b<d;b++)if(a=e[b],0<=i.call(this._keys_down,a)){c=
!0;break}return c};h.prototype._key_down=function(a,c){var b,d,e,f,g;for(g in t)b=t[g],c[b]&&(g===a||0<=i.call(this._keys_down,g)||this._keys_down.push(g));for(g in t)if(b=t[g],g!==a&&0<=i.call(this._keys_down,g)&&!c[b]&&!("cmd"===g&&"cmd"!==l)){b=d=0;for(e=this._keys_down.length;0<=e?d<e:d>e;b=0<=e?++d:--d)this._keys_down[b]===g&&this._keys_down.splice(b,1)}d=this._get_active_combos(a);g=this._get_potential_combos(a);f=0;for(e=d.length;f<e;f++)b=d[f],this._handle_combo_down(b,g,a,c);if(g.length){d=
0;for(b=g.length;d<b;d++)e=g[d],this._prevent_default(c,e.prevent_default)}0>i.call(this._keys_down,a)&&this._keys_down.push(a)};h.prototype._handle_combo_down=function(a,c,b,d){var e,f,g,h,l;if(0>i.call(a.keys,b))return!1;this._prevent_default(d,a&&a.prevent_default);e=!1;if(0<=i.call(this._keys_down,b)&&(e=!0,!a.allows_key_repeat()))return!1;l=this._add_to_active_combos(a,b);b=a.keyup_fired=!1;if(a.is_exclusive){f=0;for(g=c.length;f<g;f++)if(h=c[f],h.is_exclusive&&h.keys.length>a.keys.length){b=
!0;break}}if(!b&&(a.is_counting&&"function"===typeof a.on_keydown&&(a.count+=1),l))return this._fire("keydown",a,d,e)};h.prototype._key_up=function(a,c){var b,d,e,f,g,h;(e=this._get_sequence(a))&&this._fire("keyup",e,c);if(0>i.call(this._keys_down,a))return!1;e=b=0;for(d=this._keys_down.length;0<=d?b<d:b>d;e=0<=d?++b:--b)if(this._keys_down[e]===a){this._keys_down.splice(e,1);break}d=this._active_combos.length;e=[];h=this._active_combos;g=0;for(f=h.length;g<f;g++)b=h[g],0<=i.call(b.keys,a)&&e.push(b);
g=0;for(f=e.length;g<f;g++)b=e[g],this._handle_combo_up(b,c,a);if(1<d){g=this._active_combos;f=0;for(d=g.length;f<d;f++)b=g[f],void 0===b||0<=i.call(e,b)||this._keys_remain(b)||this._remove_from_active_combos(b)}};h.prototype._handle_combo_up=function(a,c,b){var d,e;this._prevent_default(c,a&&a.prevent_default);e=this._keys_remain(a);if(!a.keyup_fired&&(d=this._keys_down.slice(),d.push(b),!a.is_solitary||u(d,a.keys)))this._fire("keyup",a,c),a.is_counting&&("function"===typeof a.on_keyup&&"function"!==
typeof a.on_keydown)&&(a.count+=1);e||(this._fire("release",a,c),this._remove_from_active_combos(a))};h.prototype.simple_combo=function(a,c){return this.register_combo({keys:a,on_keydown:c})};h.prototype.counting_combo=function(a,c){return this.register_combo({keys:a,is_counting:!0,is_unordered:!1,on_keydown:c})};h.prototype.sequence_combo=function(a,c){return this.register_combo({keys:a,on_keydown:c,is_sequence:!0,is_exclusive:!0})};h.prototype.register_combo=function(a){var c,b,d;"string"===typeof a.keys&&
(a.keys=a.keys.split(" "));b=this._defaults;for(c in b)D.call(b,c)&&(d=b[c],void 0===a[c]&&(a[c]=d));a=new x(a);if(H(a))return this._registered_combos.push(a),a};h.prototype.register_many=function(a){var c,b,d,e;e=[];b=0;for(d=a.length;b<d;b++)c=a[b],e.push(this.register_combo(c));return e};h.prototype.unregister_combo=function(a){var c,b,d,e,f,g;if(!a)return!1;C(a);var h=this;g=function(a){var b,c,d,e;e=[];b=c=0;for(d=h._registered_combos.length;0<=d?c<d:c>d;b=0<=d?++c:--c)if(a===h._registered_combos[b]){h._registered_combos.splice(b,
1);break}else e.push(void 0);return e};if(a instanceof x)return g(a);e=this._registered_combos;f=[];b=0;for(d=e.length;b<d;b++)c=e[b],null!=c&&(c.is_unordered&&u(a,c.keys)||!c.is_unordered&&y(a,c.keys)?f.push(g(c)):f.push(void 0));return f};h.prototype.unregister_many=function(a){var c,b,d,e;e=[];b=0;for(d=a.length;b<d;b++)c=a[b],e.push(this.unregister_combo(c));return e};h.prototype.get_registered_combos=function(){return this._registered_combos};h.prototype.reset=function(){return this._registered_combos=
[]};h.prototype.listen=function(){return this._prevent_capture=!1};h.prototype.stop_listening=function(){return this._prevent_capture=!0};h.prototype.get_meta_key=function(){return l};n.Listener=h;z=function(a){return r[a]};v=function(a,c){var b;if(a.filter)return a.filter(c);var d,e,f;f=[];d=0;for(e=a.length;d<e;d++)b=a[d],c(b)&&f.push(b);return f};u=function(a,c){var b,d,e;if(a.length!==c.length)return!1;d=0;for(e=a.length;d<e;d++)if(b=a[d],!(0<=i.call(c,b)))return!1;return!0};y=function(a,c){var b,
d,e;if(a.length!==c.length)return!1;b=d=0;for(e=a.length;0<=e?d<e:d>e;b=0<=e?++d:--d)if(a[b]!==c[b])return!1;return!0};E=function(a,c){var b,d,e;d=0;for(e=a.length;d<e;d++)if(b=a[d],0>i.call(c,b))return!1;return!0};A=Array.prototype.indexOf||function(a,c){var b,d,e;b=d=0;for(e=a.length;0<=e?d<=e:d>=e;b=0<=e?++d:--d)if(a[b]===c)return b;return-1};B=function(a,c){var b,d,e,f;d=f=0;for(e=a.length;d<e;d++)if(b=a[d],b=A.call(c,b),b>=f)f=b;else return!1;return!0};p=function(){if(n.debug)return console.log.apply(console,
arguments)};F=function(a){var c,b,d;b=!1;for(c in r)if(d=r[c],a===d){b=!0;break}return b};H=function(a){var c,b,d,e,f,g,h;h=!0;a.keys.length||p("You're trying to bind a combo with no keys:",a);C(a.keys);f=a.keys;d=0;for(e=f.length;d<e;d++)b=f[d],F(b)||(p('Do not recognize the key "'+b+'"'),h=!1);if(0<=i.call(a.keys,"meta")||0<=i.call(a.keys,"cmd")){f=a.keys.slice();d=0;for(b=w.length;d<b;d++)e=w[d],-1<(c=A.call(f,e))&&f.splice(c,1);1<f.length&&(p("META and CMD key combos cannot have more than 1 non-modifier keys",
a,f),h=!1)}for(g in a)"undefined"===s[g]&&p("The property "+g+" is not a valid combo property. Your combo has still been registered.");return h};t={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"};G={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"};r={"0":"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",
27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",
104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num",59:";",61:"=",173:"-"};n._keycode_dictionary=r;n._is_array_in_array_sorted=B;-1!==navigator.userAgent.indexOf("Mac OS X")&&
(l="cmd");-1!==navigator.userAgent.indexOf("Opera")&&(r["17"]="cmd");"function"===typeof define&&define.amd?define([],function(){return n}):"undefined"!==typeof exports&&null!==exports?exports.keypress=n:window.keypress=n}).call(this);
